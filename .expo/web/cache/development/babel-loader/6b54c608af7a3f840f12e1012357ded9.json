{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\Garg\\\\Desktop\\\\whitehatjr\\\\eliberary\\\\screens\\\\Search.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { Avatar, ListItem, Icon } from \"react-native-elements\";\nimport db from \"../config\";\n\nvar SearchScreen = function (_Component) {\n  _inherits(SearchScreen, _Component);\n\n  var _super = _createSuper(SearchScreen);\n\n  function SearchScreen(props) {\n    var _this;\n\n    _classCallCheck(this, SearchScreen);\n\n    _this = _super.call(this, props);\n\n    _this.componentDidMount = function _callee() {\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this.getTransactions();\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.getTransactions = function () {\n      db.collection(\"transactions\").limit(10).get().then(function (snapshot) {\n        snapshot.docs.map(function (doc) {\n          _this.setState({\n            allTransactions: [].concat(_toConsumableArray(_this.state.allTransactions), [doc.data()]),\n            lastVisibleTransaction: doc\n          });\n        });\n      });\n    };\n\n    _this.handleSearch = function _callee2(text) {\n      var enteredText;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              enteredText = text.toUpperCase().split(\"\");\n              text = text.toUpperCase();\n\n              _this.setState({\n                allTransactions: []\n              });\n\n              if (!text) {\n                _this.getTransactions();\n              }\n\n              if (enteredText[0] === \"B\") {\n                db.collection(\"transactions\").where(\"book_id\", \"==\", text).get().then(function (snapshot) {\n                  snapshot.docs.map(function (doc) {\n                    _this.setState({\n                      allTransactions: [].concat(_toConsumableArray(_this.state.allTransactions), [doc.data()]),\n                      lastVisibleTransaction: doc\n                    });\n                  });\n                });\n              } else if (enteredText[0] === \"S\") {\n                db.collection(\"transactions\").where(\"student_id\", \"==\", text).get().then(function (snapshot) {\n                  snapshot.docs.map(function (doc) {\n                    _this.setState({\n                      allTransactions: [].concat(_toConsumableArray(_this.state.allTransactions), [doc.data()]),\n                      lastVisibleTransaction: doc\n                    });\n                  });\n                });\n              }\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.fetchMoreTransactions = function _callee3(text) {\n      var enteredText, _this$state, lastVisibleTransaction, allTransactions, query, _query;\n\n      return _regeneratorRuntime.async(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              enteredText = text.toUpperCase().split(\"\");\n              text = text.toUpperCase();\n              _this$state = _this.state, lastVisibleTransaction = _this$state.lastVisibleTransaction, allTransactions = _this$state.allTransactions;\n\n              if (!(enteredText[0] === \"B\")) {\n                _context3.next = 10;\n                break;\n              }\n\n              _context3.next = 6;\n              return _regeneratorRuntime.awrap(db.collection(\"transactions\").where(\"bookId\", \"==\", text).startAfter(lastVisibleTransaction).limit(10).get());\n\n            case 6:\n              query = _context3.sent;\n              query.docs.map(function (doc) {\n                _this.setState({\n                  allTransactions: [].concat(_toConsumableArray(_this.state.allTransactions), [doc.data()]),\n                  lastVisibleTransaction: doc\n                });\n              });\n              _context3.next = 15;\n              break;\n\n            case 10:\n              if (!(enteredText[0] === \"S\")) {\n                _context3.next = 15;\n                break;\n              }\n\n              _context3.next = 13;\n              return _regeneratorRuntime.awrap(db.collection(\"transactions\").where(\"bookId\", \"==\", text).startAfter(_this.state.lastVisibleTransaction).limit(10).get());\n\n            case 13:\n              _query = _context3.sent;\n\n              _query.docs.map(function (doc) {\n                _this.setState({\n                  allTransactions: [].concat(_toConsumableArray(_this.state.allTransactions), [doc.data()]),\n                  lastVisibleTransaction: doc\n                });\n              });\n\n            case 15:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.renderItem = function (_ref) {\n      var item = _ref.item,\n          i = _ref.i;\n      var date = item.date.toDate().toString().split(\" \").splice(0, 4).join(\" \");\n      var transactionType = item.transaction_type === \"issue\" ? \"issued\" : \"returned\";\n      return React.createElement(View, {\n        style: {\n          borderWidth: 1\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 7\n        }\n      }, React.createElement(ListItem, {\n        key: i,\n        bottomDivider: true,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 9\n        }\n      }, React.createElement(Icon, {\n        type: \"antdesign\",\n        name: \"book\",\n        size: 40,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }\n      }), React.createElement(ListItem.Content, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }\n      }, React.createElement(ListItem.Title, {\n        style: styles.title,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 13\n        }\n      }, item.book_name + \" ( \" + item.book_id + \" )\"), React.createElement(ListItem.Subtitle, {\n        style: styles.subtitle,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 13\n        }\n      }, \"This book \" + transactionType + \" by \" + item.student_name), React.createElement(View, {\n        style: styles.lowerLeftContaiiner,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 13\n        }\n      }, React.createElement(View, {\n        style: styles.transactionContainer,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 15\n        }\n      }, React.createElement(Text, {\n        style: [styles.transactionText, {\n          color: item.transaction_type === \"issue\" ? \"#78D304\" : \"#0364F4\"\n        }],\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 17\n        }\n      }, item.transaction_type.charAt(0).toUpperCase() + item.transaction_type.slice(1)), React.createElement(Icon, {\n        type: \"ionicon\",\n        name: item.transaction_type === \"issue\" ? \"checkmark-circle-outline\" : \"arrow-redo-circle-outline\",\n        color: item.transaction_type === \"issue\" ? \"#78D304\" : \"#0364F4\",\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 17\n        }\n      })), React.createElement(Text, {\n        style: styles.date,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 15\n        }\n      }, date)))));\n    };\n\n    _this.state = {\n      allTransactions: []\n    };\n    return _this;\n  }\n\n  _createClass(SearchScreen, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state2 = this.state,\n          searchText = _this$state2.searchText,\n          allTransactions = _this$state2.allTransactions;\n      return React.createElement(View, {\n        style: styles.container,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 7\n        }\n      }, React.createElement(View, {\n        style: styles.upperContainer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: styles.textinputContainer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }\n      }, React.createElement(TextInput, {\n        style: styles.textinput,\n        onChangeText: function onChangeText(text) {\n          return _this2.setState({\n            searchText: text\n          });\n        },\n        placeholder: \"Type here\",\n        placeholderTextColor: \"#FFFFFF\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 13\n        }\n      }), React.createElement(TouchableOpacity, {\n        style: styles.scanbutton,\n        onPress: function onPress() {\n          return _this2.handleSearch(searchText);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        style: styles.scanbuttonText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 15\n        }\n      }, \"Search\")))), React.createElement(View, {\n        style: styles.lowerContainer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 9\n        }\n      }, React.createElement(FlatList, {\n        data: allTransactions,\n        renderItem: this.renderItem,\n        keyExtractor: function keyExtractor(item, index) {\n          return index.toString();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 11\n        }\n      })));\n    }\n  }]);\n\n  return SearchScreen;\n}(Component);\n\nexport { SearchScreen as default };\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#5653D4\"\n  },\n  upperContainer: {\n    flex: 0.2,\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  textinputContainer: {\n    borderWidth: 2,\n    borderRadius: 10,\n    flexDirection: \"row\",\n    backgroundColor: \"#9DFD24\",\n    borderColor: \"#FFFFFF\"\n  },\n  textinput: {\n    width: \"57%\",\n    height: 50,\n    padding: 10,\n    borderColor: \"#FFFFFF\",\n    borderRadius: 10,\n    borderWidth: 3,\n    fontSize: 18,\n    backgroundColor: \"#5653D4\",\n    fontFamily: \"Rajdhani_600SemiBold\",\n    color: \"#FFFFFF\"\n  },\n  scanbutton: {\n    width: 100,\n    height: 50,\n    backgroundColor: \"#9DFD24\",\n    borderTopRightRadius: 10,\n    borderBottomRightRadius: 10,\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  scanbuttonText: {\n    fontSize: 24,\n    color: \"#0A0101\",\n    fontFamily: \"Rajdhani_600SemiBold\"\n  },\n  lowerContainer: {\n    flex: 0.8,\n    backgroundColor: \"#FFFFFF\"\n  },\n  title: {\n    fontSize: 20,\n    fontFamily: \"Rajdhani_600SemiBold\"\n  },\n  subtitle: {\n    fontSize: 16,\n    fontFamily: \"Rajdhani_600SemiBold\"\n  },\n  lowerLeftContaiiner: {\n    alignSelf: \"flex-end\",\n    marginTop: -40\n  },\n  transactionContainer: {\n    flexDirection: \"row\",\n    justifyContent: \"space-evenly\",\n    alignItems: \"center\"\n  },\n  transactionText: {\n    fontSize: 20,\n    fontFamily: \"Rajdhani_600SemiBold\"\n  },\n  date: {\n    fontSize: 12,\n    fontFamily: \"Rajdhani_600SemiBold\",\n    paddingTop: 5\n  }\n});","map":{"version":3,"sources":["C:/Users/Garg/Desktop/whitehatjr/eliberary/screens/Search.js"],"names":["React","Component","Avatar","ListItem","Icon","db","SearchScreen","props","componentDidMount","getTransactions","collection","limit","get","then","snapshot","docs","map","doc","setState","allTransactions","state","data","lastVisibleTransaction","handleSearch","text","enteredText","toUpperCase","split","where","fetchMoreTransactions","startAfter","query","renderItem","item","i","date","toDate","toString","splice","join","transactionType","transaction_type","borderWidth","styles","title","book_name","book_id","subtitle","student_name","lowerLeftContaiiner","transactionContainer","transactionText","color","charAt","slice","searchText","container","upperContainer","textinputContainer","textinput","scanbutton","scanbuttonText","lowerContainer","index","StyleSheet","create","flex","backgroundColor","justifyContent","alignItems","borderRadius","flexDirection","borderColor","width","height","padding","fontSize","fontFamily","borderTopRightRadius","borderBottomRightRadius","alignSelf","marginTop","paddingTop"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  View,\n  StyleSheet,\n  TextInput,\n  TouchableOpacity,\n  Text,\n  FlatList\n} from \"react-native\";\nimport { Avatar, ListItem, Icon } from \"react-native-elements\";\nimport db from \"../config\";\n\nexport default class SearchScreen extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      allTransactions: [],\n    };\n  }\n\n  componentDidMount = async () => {\n    this.getTransactions();\n  };\n\n  //Bp\n  getTransactions = () => {\n    db.collection(\"transactions\")\n      .limit(10)\n      .get()\n      .then(snapshot => {\n        snapshot.docs.map(doc => {\n          this.setState({\n            allTransactions: [...this.state.allTransactions, doc.data()],\n            lastVisibleTransaction: doc\n          });\n        });\n      });\n  };\n\n  //TA\n  handleSearch = async text => {\n    var enteredText = text.toUpperCase().split(\"\");\n    text = text.toUpperCase();\n    this.setState({\n      allTransactions: []\n    });\n    if (!text) {\n      this.getTransactions();\n    }\n\n    if (enteredText[0] === \"B\") {\n      db.collection(\"transactions\")\n        .where(\"book_id\", \"==\", text)\n        .get()\n        .then(snapshot => {\n          snapshot.docs.map(doc => {\n            this.setState({\n              allTransactions: [...this.state.allTransactions, doc.data()],\n              lastVisibleTransaction: doc\n            });\n          });\n        });\n    } else if (enteredText[0] === \"S\") {\n      db.collection(\"transactions\")\n        .where(\"student_id\", \"==\", text)\n        .get()\n        .then(snapshot => {\n          snapshot.docs.map(doc => {\n            this.setState({\n              allTransactions: [...this.state.allTransactions, doc.data()],\n              lastVisibleTransaction: doc\n            });\n          });\n        });\n    }\n  };\n\n  //SA\n  fetchMoreTransactions = async text => {\n    var enteredText = text.toUpperCase().split(\"\");\n    text = text.toUpperCase();\n\n    const { lastVisibleTransaction, allTransactions } = this.state;\n    if (enteredText[0] === \"B\") {\n      const query = await db\n        .collection(\"transactions\")\n        .where(\"bookId\", \"==\", text)\n        .startAfter(lastVisibleTransaction)\n        .limit(10)\n        .get();\n      query.docs.map(doc => {\n        this.setState({\n          allTransactions: [...this.state.allTransactions, doc.data()],\n          lastVisibleTransaction: doc\n        });\n      });\n    } else if (enteredText[0] === \"S\") {\n      const query = await db\n        .collection(\"transactions\")\n        .where(\"bookId\", \"==\", text)\n        .startAfter(this.state.lastVisibleTransaction)\n        .limit(10)\n        .get();\n      query.docs.map(doc => {\n        this.setState({\n          allTransactions: [...this.state.allTransactions, doc.data()],\n          lastVisibleTransaction: doc\n        });\n      });\n    }\n  };\n\n  renderItem = ({ item, i }) => {\n    var date = item.date\n      .toDate()\n      .toString()\n      .split(\" \")\n      .splice(0, 4)\n      .join(\" \");\n\n    var transactionType =\n      item.transaction_type === \"issue\" ? \"issued\" : \"returned\";\n    return (\n      <View style={{ borderWidth: 1 }}>\n        <ListItem key={i} bottomDivider>\n          <Icon type={\"antdesign\"} name={\"book\"} size={40} />\n          <ListItem.Content>\n            <ListItem.Title style={styles.title}>\n              {`${item.book_name} ( ${item.book_id} )`}\n            </ListItem.Title>\n            <ListItem.Subtitle style={styles.subtitle}>\n              {`This book ${transactionType} by ${item.student_name}`}\n            </ListItem.Subtitle>\n            <View style={styles.lowerLeftContaiiner}>\n              <View style={styles.transactionContainer}>\n                <Text\n                  style={[\n                    styles.transactionText,\n                    {\n                      color:\n                        item.transaction_type === \"issue\"\n                          ? \"#78D304\"\n                          : \"#0364F4\"\n                    }\n                  ]}\n                >\n                  {item.transaction_type.charAt(0).toUpperCase() +\n                    item.transaction_type.slice(1)}\n                </Text>\n                <Icon\n                  type={\"ionicon\"}\n                  name={\n                    item.transaction_type === \"issue\"\n                      ? \"checkmark-circle-outline\"\n                      : \"arrow-redo-circle-outline\"\n                  }\n                  color={\n                    item.transaction_type === \"issue\" ? \"#78D304\" : \"#0364F4\"\n                  }\n                />\n              </View>\n              <Text style={styles.date}>{date}</Text>\n            </View>\n          </ListItem.Content>\n        </ListItem>\n      </View>\n    );\n  };\n\n  render() {\n    const { searchText, allTransactions } = this.state;\n    return (\n      <View style={styles.container}>\n        <View style={styles.upperContainer}>\n          <View style={styles.textinputContainer}>\n            <TextInput\n              style={styles.textinput}\n              onChangeText={text => this.setState({ searchText: text })}\n              placeholder={\"Type here\"}\n              placeholderTextColor={\"#FFFFFF\"}\n            />\n            <TouchableOpacity\n              style={styles.scanbutton}\n              onPress={() => this.handleSearch(searchText)}\n            >\n              <Text style={styles.scanbuttonText}>Search</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n        \n        <View style={styles.lowerContainer}>\n          <FlatList\n            data={allTransactions}\n            renderItem={this.renderItem}\n            keyExtractor={(item, index) => index.toString()}\n          />\n        </View>\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#5653D4\"\n  },\n  upperContainer: {\n    flex: 0.2,\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  textinputContainer: {\n    borderWidth: 2,\n    borderRadius: 10,\n    flexDirection: \"row\",\n    backgroundColor: \"#9DFD24\",\n    borderColor: \"#FFFFFF\"\n  },\n  textinput: {\n    width: \"57%\",\n    height: 50,\n    padding: 10,\n    borderColor: \"#FFFFFF\",\n    borderRadius: 10,\n    borderWidth: 3,\n    fontSize: 18,\n    backgroundColor: \"#5653D4\",\n    fontFamily: \"Rajdhani_600SemiBold\",\n    color: \"#FFFFFF\"\n  },\n  scanbutton: {\n    width: 100,\n    height: 50,\n    backgroundColor: \"#9DFD24\",\n    borderTopRightRadius: 10,\n    borderBottomRightRadius: 10,\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  scanbuttonText: {\n    fontSize: 24,\n    color: \"#0A0101\",\n    fontFamily: \"Rajdhani_600SemiBold\"\n  },\n  lowerContainer: {\n    flex: 0.8,\n    backgroundColor: \"#FFFFFF\"\n  },\n  title: {\n    fontSize: 20,\n    fontFamily: \"Rajdhani_600SemiBold\"\n  },\n  subtitle: {\n    fontSize: 16,\n    fontFamily: \"Rajdhani_600SemiBold\"\n  },\n  lowerLeftContaiiner: {\n    alignSelf: \"flex-end\",\n    marginTop: -40\n  },\n  transactionContainer: {\n    flexDirection: \"row\",\n    justifyContent: \"space-evenly\",\n    alignItems: \"center\"\n  },\n  transactionText: {\n    fontSize: 20,\n\n    fontFamily: \"Rajdhani_600SemiBold\"\n  },\n  date: {\n    fontSize: 12,\n    fontFamily: \"Rajdhani_600SemiBold\",\n    paddingTop: 5\n  }\n});\n"]},"metadata":{},"sourceType":"module"}